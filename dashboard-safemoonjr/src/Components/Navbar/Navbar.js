/*******************************************************
 * Copyright (C) 2021-2031 SAS Solicity |Â solicity.company@gmail.com
 *******************************************************/

import './Navbar.scss';
import Logo from '../../Assets/logo.png';
import BLogo from '../../Assets/logo.png';
import { useEffect, useState, useContext } from 'react';

import {ConnectContext} from '../../context/connectContext';

export default function Navbar(){
    const [OpenModal, setOpenModal] = useState(false);
    const [loading, setLoading] = useState(true);

    const {Connect, Con, setConnect, web3, account, getAccount, setGetAccount, setLoadingData} = useContext(ConnectContext);
    
    const Loading = () =>{
        return(
            <div className="Loading">
                <img className="logoWait rotating" src={Logo} />
            </div>
        )
    }

    const Modal = () =>{
        return(
            <div className="bgModal">
                <div className="modal">
                    <svg onClick={()=>setOpenModal(false)} className="cross" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M13.3 10.0006L19.4872 3.81336C20.1709 3.12973 20.1709 2.0214 19.4872 1.33884L18.6624 0.514003C17.9786 -0.169839 16.8702 -0.169839 16.1877 0.514003L10.0006 6.70105L3.81336 0.512721C3.12973 -0.170907 2.0214 -0.170907 1.33884 0.512721L0.512721 1.33756C-0.170907 2.0214 -0.170907 3.12973 0.512721 3.81229L6.70105 10.0006L0.514003 16.1877C-0.169839 16.8715 -0.169839 17.9798 0.514003 18.6624L1.33884 19.4872C2.02247 20.1709 3.1308 20.1709 3.81336 19.4872L10.0006 13.3L16.1877 19.4872C16.8715 20.1709 17.9798 20.1709 18.6624 19.4872L19.4872 18.6624C20.1709 17.9786 20.1709 16.8702 19.4872 16.1877L13.3 10.0006Z" fill="#1B4993"/>
                    </svg>
                    <h1>Your wallet</h1>
                    <p id="myWalletAddress">{Connect && account}</p>

                    <a href="#" id="myDashboard" onClick={()=>{setGetAccount(false); setOpenModal(false); setLoadingData(true);}}>Go to your dashboard</a>
                    <a href="#" onClick={async()=>{localStorage.clear(); setConnect(false); window.location.reload()}} id="logout">Disconnect</a>
                </div>
            </div>
        )
    }

    useEffect(()=>{
        let input = document.getElementById('walletAddress');
        input.setAttribute('size',input.getAttribute('placeholder').length);
    },[]);


    useEffect(()=>{
        setTimeout(()=>{
            setLoading(false)
        },1500);
    },[])

    return(
        <>
        {OpenModal && <Modal/>}
        {loading && <Loading/>}
        <nav>
            <div className="blogo">
                <img src={BLogo} />
                {/* <p className="AdaName">  Enhance</p> */}
            </div>
            
            <div className="addressInput">
                <svg className="addressIcon" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M15.2155 3.41492C15.2155 2.9457 15.0323 2.50398 14.7005 2.17211L13.0434 0.515C12.7161 0.187695 12.2515 0 11.7892 0H11.6885V3.51562H15.2155L15.2155 3.41492Z" fill="white"/>
                    <path d="M10.7007 12.0913C10.8128 11.7508 11.0085 11.4338 11.2637 11.1769L15.231 7.22562V4.6875H11.1138C10.7899 4.6875 10.5469 4.42543 10.5469 4.10156V0H1.75781C0.788516 0 0 0.788516 0 1.75781V18.2422C0 19.2115 0.788516 20 1.75781 20H13.4575C14.4268 20 15.231 19.2115 15.231 18.2422V13.8691L14.5871 14.4974C14.3262 14.756 14.0206 14.9443 13.6761 15.0593L11.813 15.6813L11.5292 15.6968C11.06 15.6968 10.616 15.4684 10.3402 15.0862C10.0667 14.7057 9.9923 14.2125 10.1411 13.7667L10.7007 12.0913ZM2.92969 10.5469H8.77004C9.09391 10.5469 9.35598 10.8089 9.35598 11.1328C9.35598 11.4567 9.09391 11.7188 8.77004 11.7188H2.92969C2.60582 11.7188 2.34375 11.4567 2.34375 11.1328C2.34375 10.8089 2.60582 10.5469 2.92969 10.5469ZM2.34375 8.78906C2.34375 8.4652 2.60582 8.20312 2.92969 8.20312H8.77004C9.09391 8.20312 9.35598 8.4652 9.35598 8.78906C9.35598 9.11293 9.09391 9.375 8.77004 9.375H2.92969C2.60582 9.375 2.34375 9.11293 2.34375 8.78906ZM2.34375 13.4766C2.34375 13.1527 2.60582 12.8906 2.92969 12.8906H8.77004C9.09391 12.8906 9.35598 13.1527 9.35598 13.4766C9.35598 13.8004 9.09391 14.0625 8.77004 14.0625H2.92969C2.60582 14.0625 2.34375 13.8004 2.34375 13.4766ZM11.1138 16.4062C11.4377 16.4062 11.6997 16.6683 11.6997 16.9922C11.6997 17.3161 11.4377 17.5781 11.1138 17.5781H7.59816C7.2743 17.5781 7.01223 17.3161 7.01223 16.9922C7.01223 16.6683 7.2743 16.4062 7.59816 16.4062H11.1138ZM2.92969 7.03125C2.60582 7.03125 2.34375 6.76918 2.34375 6.44531C2.34375 6.12145 2.60582 5.85938 2.92969 5.85938H11.1138C11.4377 5.85938 11.6997 6.12145 11.6997 6.44531C11.6997 6.76918 11.4377 7.03125 11.1138 7.03125H2.92969Z" fill="white"/>
                    <path d="M11.7617 12.6094L11.2519 14.1387C11.1755 14.3678 11.3935 14.5857 11.6226 14.5092L13.151 13.9988L11.7617 12.6094Z" fill="white"/>
                    <path d="M16.313 7.78516L12.4541 11.6441L14.1184 13.3084C14.9905 12.436 16.6876 10.7387 17.9771 9.44922L16.313 7.78516Z" fill="white"/>
                    <path d="M19.6549 6.10488C19.4489 5.89773 19.1457 5.7793 18.8241 5.7793C18.5025 5.7793 18.1992 5.89773 17.9921 6.10547L17.1406 6.95691L18.8046 8.6209C19.2707 8.15473 19.5929 7.83254 19.6561 7.76938C20.1138 7.31098 20.1138 6.56434 19.6549 6.10488Z" fill="white"/>
                    <path d="M19.6572 7.77236C19.6573 7.77236 19.6573 7.77231 19.6573 7.77227C19.6592 7.77041 19.66 7.76958 19.6615 7.76807C19.66 7.76963 19.6592 7.77046 19.6572 7.77236Z" fill="white"/>
                    <path d="M19.6621 7.76772C19.6645 7.76538 19.6672 7.76265 19.6686 7.76123C19.6671 7.7627 19.6645 7.76538 19.6621 7.76772Z" fill="white"/>
                    <path d="M19.668 7.7614C19.6727 7.75667 19.6728 7.75657 19.668 7.7614V7.7614Z" fill="white"/>
                </svg>

                <input onInput={(e)=>{setLoadingData(true); setGetAccount(e.target.value)}} id="walletAddress" placeholder="Paste a wallet address here" />
            </div>

            {localStorage.getItem("walletConnected") && Connect ? 
                <div onClick={()=>{setOpenModal(true)}} id="walletInNav" className="walletInput">
                    <div className="round">
                        <svg className="walletIcon" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15.2725 8.0671V5.81833C15.2725 5.0558 14.681 4.43566 13.9338 4.37553L11.8454 0.727861C11.6518 0.390503 11.3393 0.149382 10.9654 0.0492583C10.5932 -0.0501832 10.2041 0.00204321 9.87096 0.195915L2.71189 4.3638H1.45453C0.652353 4.3638 0 5.01612 0 5.81833V14.5455C0 15.3476 0.652319 16 1.45453 16H13.818C14.6202 16 15.2725 15.3477 15.2725 14.5455V12.2967C15.6949 12.1461 15.9998 11.7462 15.9998 11.2728V9.09101C15.9998 8.61756 15.6949 8.21772 15.2725 8.0671ZM13.0887 4.3638H9.91927L12.2964 2.97987L13.0887 4.3638ZM11.935 2.34875L8.47387 4.3638H7.03823L11.5761 1.7218L11.935 2.34875ZM10.2371 0.824439C10.4015 0.728202 10.5936 0.702634 10.7772 0.751656C10.9629 0.80136 11.1178 0.921392 11.214 1.08935L11.2147 1.09068L5.5929 4.3638H4.15732L10.2371 0.824439ZM14.5452 14.5455C14.5452 14.9464 14.2189 15.2727 13.818 15.2727H1.45453C1.05363 15.2727 0.727284 14.9464 0.727284 14.5455V5.81833C0.727284 5.41743 1.05363 5.09109 1.45453 5.09109H13.818C14.2189 5.09109 14.5452 5.41743 14.5452 5.81833V8.00012H12.3634C11.1603 8.00012 10.1817 8.97878 10.1817 10.1819C10.1817 11.385 11.1603 12.3637 12.3634 12.3637H14.5452V14.5455V14.5455ZM15.2725 11.2728C15.2725 11.4734 15.1095 11.6364 14.9089 11.6364H12.3634C11.5613 11.6364 10.9089 10.9841 10.9089 10.1819C10.9089 9.37972 11.5612 8.72737 12.3634 8.72737H14.9089C15.1095 8.72737 15.2725 8.89035 15.2725 9.09101V11.2728V11.2728Z" fill="white"/>
                            <path d="M12.363 9.45459C11.9621 9.45459 11.6357 9.78094 11.6357 10.1818C11.6357 10.5827 11.9621 10.9091 12.363 10.9091C12.7639 10.9091 13.0902 10.5827 13.0902 10.1818C13.0903 9.78094 12.7639 9.45459 12.363 9.45459Z" fill="white"/>
                        </svg>
                    </div>
                    <p className="walletAddress">{Connect && account.substring(0,11)+"..."}</p>
                </div> :
                <button onClick={async()=>{await Con()}}>Connect</button>
            }
            
        </nav>
        </>
    )
}